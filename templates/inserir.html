{% extends 'base.html' %}

{% block content %}
    <div class="content">
        {% if mensagem %}
            <div class="mensagem {{ tipo_mensagem }}">{{ mensagem }}</div>
        {% endif %}
        <form method="POST">
            <label>FORNECEDOR:</label>
            <select name="fornecedor" required>
                <option value="">-- Escolha --</option>
                <option value="DEJAVU">DEJAVU</option>
                <option value="AI COSMETIC">AI COSMETIC</option>
            </select>

            <label>PRODUTO:</label>
            <input type="text" name="produto" required>

            <label>QUANTIDADE:</label>
            <input type="number" name="quantidade" min="1" required>

            <label>PREÃ‡O:</label>
            <input type="text" name="preco" oninput="formatarMoeda(this)" required>

            <button type="submit">INSERIR</button>
        </form>
    </div>

    <script>
        function formatarMoeda(input) {
            let valor = input.value.replace(/\D/g, '');
            valor = (valor / 100).toFixed(2) + '';
            valor = valor.replace('.', ',');
            valor = valor.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
            input.value = 'R$ ' + valor;
        }

        window.onload = function () {
            const msg = document.querySelector('.mensagem');
            if (msg) {
                setTimeout(() => msg.style.display = 'none', 3000);
            }
        }
    </script>
{% endblock %}
